<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FEMS ER Diagram - Chen Notation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #fbfaff; /* Pastel Lavender White */
            color: #1f2937; /* Dark text */
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.08);
            max-width: 100%;
            margin: 20px auto;
        }
        
        h1 {
            color: #1a1a1a;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 600;
        }
        
        .diagram-container {
            width: 100%;
            overflow: auto;
            border: 1px solid #d1d5db; /* Lighter border */
            border-radius: 10px;
            background: #fdfdff;
            padding: 10px;
        }
        
        svg {
            display: block;
            margin: 0 auto;
            font-size: 13px; /* Slightly larger font */
            font-weight: 500;
            color: #1f2937;
        }

        /* --- UPDATED STYLES --- */

        /* Original Entity Styles (kept for fallback) */
        .entity rect {
            fill: #eef2ff; /* Pastel Indigo */
            stroke: #6366f1; /* Indigo */
            stroke-width: 2;
            rx: 10;
            ry: 10;
        }
        .entity text {
            text-anchor: middle;
            font-weight: bold;
            font-size: 16px; /* Larger entity font */
            fill: #3730a3; /* Dark Indigo */
        }

        /* 1. New Entity-Specific Colors */
        .entity-users rect { fill: #dcfce7; stroke: #16a34a; } /* Green */
        .entity-users text { fill: #14532d; }
        
        .entity-email rect { fill: #dbeafe; stroke: #2563eb; } /* Blue */
        .entity-email text { fill: #1e3a8a; }

        /* *** UPDATED VENDORS COLOR *** */
        .entity-vendors rect { fill: #fee2e2; stroke: #ef4444; } /* Red */
        .entity-vendors text { fill: #7f1d1d; }
        
        .entity-menus rect { fill: #f3e8ff; stroke: #9333ea; } /* Purple */
        .entity-menus text { fill: #581c87; }
        
        .entity-menu-items rect { fill: #ffe4e6; stroke: #db2777; } /* Pink/Magenta */
        .entity-menu-items text { fill: #831843; }
        
        .entity-orders rect { fill: #cffafe; stroke: #0d9488; } /* Teal */
        .entity-orders text { fill: #134e4a; }
        
        .entity-order-items rect { fill: #ffedd5; stroke: #f97316; } /* Orange */
        .entity-order-items text { fill: #7c2d12; }
        
        /* *** UPDATED NOTIFICATIONS COLOR *** */
        .entity-notifications rect { fill: #f5f3ff; stroke: #8b5cf6; } /* Light Purple */
        .entity-notifications text { fill: #4c1d95; }
        
        .entity-analytics rect { fill: #e5e7eb; stroke: #4b5563; } /* Grey */
        .entity-analytics text { fill: #1f2937; }


        /* Weak Entity Styles (Untouched) */
        .weak-entity rect {
            fill: #fffbeb; 
            stroke: #f59e0b;
            stroke-width: 4;
            rx: 10;
            ry: 10;
        }
        .weak-entity .inner-rect {
            fill: #fffbeb;
            stroke: #f59e0b;
            stroke-width: 2;
            rx: 8;
            ry: 8;
        }
        .weak-entity text {
            fill: #b45309;
            font-size: 16px;
        }


        /* 2. Relationship Styles (Beige) */
        .relationship polygon {
            fill: #fef0c7; /* Beige/Yellow fill */
            stroke: #f59e0b; /* Amber/Gold border */
            stroke-width: 2;
        }
        .relationship text {
            text-anchor: middle;
            font-size: 15px; 
            font-weight: 600;
            fill: #b45309; /* Dark Amber text */
        }

        /* Identifying Relationship (Beige) */
        .id-relationship polygon {
            fill: #fef0c7;
            stroke: #f59e0b;
            stroke-width: 4;
        }
        .id-relationship .inner-diamond {
            fill: #fef0c7;
            stroke: #f59e0b;
            stroke-width: 2;
        }

        /* Attribute Styles (Untouched) */
        .attribute ellipse {
            fill: #FFF;
            stroke: #a1a1aa; 
            stroke-width: 1.5;
        }
        .attribute text {
            text-anchor: middle;
            font-size: 13px;
            fill: #3f3f46;
        }
        .pk text {
            text-decoration: underline;
            font-weight: 600;
        }
        .partial-key text {
            text-decoration: underline;
            text-decoration-style: dashed;
            font-weight: 600;
        }
        .derived ellipse {
            stroke-dasharray: 4, 4;
            stroke: #a1a1aa;
        }
        .multivalued ellipse {
            stroke: #a1a1aa;
            stroke-width: 3;
        }

        /* Line Styles (Untouched) */
        .line {
            stroke: #52525b; 
            stroke-width: 1.5;
            fill: none;
        }
        .total-participation {
            stroke: #52525b;
            stroke-width: 4;
            fill: none;
        }
        
        /* 3. Cardinality (Red) */
        .cardinality {
            font-size: 14px; 
            font-weight: 700;
            fill: #ef4444; /* Red */
        }
        
        /* --- END UPDATED STYLES --- */
        
        .legend {
            margin-top: 30px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }
        
        .legend h3 {
            margin-top: 0;
            color: #334155;
            font-weight: 600;
        }
        
        .legend ul {
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }
        .legend li {
            font-size: 14px;
            color: #475569;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>FEMS ER Diagram</h1>
        
        <div class="diagram-container">
            <!-- Increased SVG size for better spacing -->
            <svg width="8000" height="4000" viewBox="0 0 8000 4000">
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path d="M0,0 L0,6 L9,3 z" fill="#333"/>
                    </marker>
                </defs>
                
                <!-- ENTITY: USERS (Central) -->
                <!-- Added new class "entity-users" -->
                <g id="users-entity" class="entity entity-users">
                    <rect x="3880" y="500" width="240" height="100"/>
                    <text x="4000" y="555">USERS</text>
                    
                    <!-- Attributes for USERS -->
                    <g class="attribute pk">
                        <ellipse cx="3730" cy="400" rx="70" ry="35"/>
                        <text x="3730" y="405">id</text>
                        <line class="line" x1="3800" y1="400" x2="3880" y2="500"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="500" rx="60" ry="35"/>
                        <text x="3730" y="505">email</text>
                        <line class="line" x1="3790" y1="500" x2="3880" y2="520"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="600" rx="85" ry="35"/>
                        <text x="3730" y="605">password_hash</text>
                        <line class="line" x1="3815" y1="600" x2="3880" y2="540"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="700" rx="70" ry="35"/>
                        <text x="3730" y="705">role</text>
                        <line class="line" x1="3800" y1="700" x2="3880" y2="580"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="400" rx="70" ry="35"/>
                        <text x="4270" y="405">full_name</text>
                        <line class="line" x1="4200" y1="400" x2="4120" y2="500"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="500" rx="65" ry="35"/>
                        <text x="4270" y="505">phone</text>
                        <line class="line" x1="4205" y1="500" x2="4120" y2="520"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="600" rx="80" ry="35"/>
                        <text x="4270" y="605">is_email_verified</text>
                        <line class="line" x1="4190" y1="600" x2="4120" y2="540"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="700" rx="70" ry="35"/>
                        <text x="4270" y="705">last_login</text>
                        <line class="line" x1="4200" y1="700" x2="4120" y2="580"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4000" cy="380" rx="70" ry="35"/>
                        <text x="4000" y="385">created_at</text>
                        <line class="line" x1="4000" y1="415" x2="4000" y2="500"/>
                    </g>
                </g>

                <!-- ENTITY: EMAIL_VERIFICATIONS -->
                <!-- Added new class "entity-email" -->
                <g id="email-verifications-entity" class="entity entity-email">
                    <rect x="1980" y="500" width="240" height="100"/>
                    <text x="2100" y="535">EMAIL</text>
                    <text x="2100" y="560">VERIFICATIONS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="1830" cy="500" rx="60" ry="35"/>
                        <text x="1830" y="505">id</text>
                        <line class="line" x1="1890" y1="500" x2="1980" y2="525"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="600" rx="60" ry="35"/>
                        <text x="1830" y="605">code</text>
                        <line class="line" x1="1890" y1="600" x2="1980" y2="575"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="500" rx="70" ry="35"/>
                        <text x="2370" y="505">expires_at</text>
                        <line class="line" x1="2300" y1="500" x2="2220" y2="525"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="600" rx="60" ry="35"/>
                        <text x="2370" y="605">is_used</text>
                        <line class="line" x1="2310" y1="600" x2="2220" y2="575"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="700" rx="70" ry="35"/>
                        <text x="1830" y="705">created_at</text>
                        <line class="line" x1="1890" y1="700" x2="1980" y2="585"/>
                    </g>
                </g>

                <!-- RELATIONSHIP 1: USERS -- EMAIL_VERIFICATIONS (1:M, Partial from User, Total from Email) -->
                <g id="user-receives-email-rel" class="relationship">
                    <polygon points="3000,525 3050,550 3000,575 2950,550"/>
                    <text x="3000" y="555">RECEIVES</text>
                    
                    <!-- Line to USERS (Partial) -->
                    <line class="line" x1="3880" y1="550" x2="3050" y2="550"/>
                    <text class="cardinality" x="3850" y="545">1</text>
                    
                    <!-- Line to EMAIL_VERIFICATIONS (Total) -->
                    <line class="total-participation" x1="2950" y1="550" x2="2220" y2="550"/>
                    <text class="cardinality" x="2250" y="545">M</text>
                </g>

                <!-- ENTITY: NOTIFICATIONS -->
                <!-- Added new class "entity-notifications" -->
                <g id="notifications-entity" class="entity entity-notifications">
                    <rect x="5980" y="500" width="240" height="100"/>
                    <text x="6100" y="555">NOTIFICATIONS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="5830" cy="500" rx="60" ry="35"/>
                        <text x="5830" y="505">id</text>
                        <line class="line" x1="5890" y1="500" x2="5980" y2="525"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="5830" cy="600" rx="60" ry="35"/>
                        <text x="5830" y="605">type</text>
                        <line class="line" x1="5890" y1="600" x2="5980" y2="575"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="6370" cy="500" rx="70" ry="35"/>
                        <text x="6370" y="505">payload</text>
                        <line class="line" x1="6300" y1="500" x2="6220" y2="525"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="6370" cy="600" rx="60" ry="35"/>
                        <text x="6370" y="605">is_read</text>
                        <line class="line" x1="6310" y1="600" x2="6220" y2="575"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="5830" cy="700" rx="70" ry="35"/>
                        <text x="5830" y="705">created_at</text>
                        <line class="line" x1="5890" y1="700" x2="5980" y2="585"/>
                    </g>
                </g>

                <!-- RELATIONSHIP 10: USERS -- NOTIFICATIONS (1:M, Partial from User, Total from Notification) -->
                <g id="user-receives-notify-rel" class="relationship">
                    <polygon points="5000,525 5050,550 5000,575 4950,550"/>
                    <text x="5000" y="555">RECEIVES</text>
                    
                    <!-- Line to USERS (Partial) -->
                    <line class="line" x1="4120" y1="550" x2="4950" y2="550"/>
                    <text class="cardinality" x="4150" y="545">1</text>
                    
                    <!-- Line to NOTIFICATIONS (Total) -->
                    <line class="total-participation" x1="5050" y1="550" x2="5980" y2="550"/>
                    <text class="cardinality" x="5950" y="545">M</text>
                </g>

                <!-- ENTITY: VENDORS -->
                <!-- Added new class "entity-vendors" -->
                <g id="vendors-entity" class="entity entity-vendors">
                    <rect x="3880" y="1200" width="240" height="100"/>
                    <text x="4000" y="1255">VENDORS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="3730" cy="1200" rx="60" ry="35"/>
                        <text x="3730" y="1205">id</text>
                        <line class="line" x1="3790" y1="1200" x2="3880" y2="1225"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="1300" rx="80" ry="35"/>
                        <text x="3730" y="1305">vendor_name</text>
                        <line class="line" x1="3810" y1="1300" x2="3880" y2="1275"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="1200" rx="80" ry="35"/>
                        <text x="4270" y="1205">pickup_available</text>
                        <line class="line" x1="4190" y1="1200" x2="4120" y2="1225"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="1300" rx="90" ry="35"/>
                        <text x="4270" y="1305">delivery_available</text>
                        <line class="line" x1="4180" y1="1300" x2="4120" y2="1275"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="1100" rx="70" ry="35"/>
                        <text x="3730" y="1105">location</text>
                        <line class="line" x1="3790" y1="1100" x2="3880" y2="1215"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="1100" rx="70" ry="35"/>
                        <text x="4270" y="1105">created_at</text>
                        <line class="line" x1="4210" y1="1100" x2="4120" y2="1215"/>
                    </g>
                </g>
                
                <!-- RELATIONSHIP 2: USERS -- VENDORS (1:1, Partial from User, Total from Vendor) -->
                <g id="user-owns-vendor-rel" class="relationship">
                    <polygon points="4000,820 4050,870 4000,920 3950,870"/>
                    <text x="4000" y="875">OWNS</text>
                    <!-- Line to USERS (Partial) -->
                    <line class="line" x1="4000" y1="600" x2="4000" y2="820"/>
                    <text class="cardinality" x="4010" y="800">1</text>
                    <!-- Line to VENDORS (Total) -->
                    <line class="total-participation" x1="4000" y1="920" x2="4000" y2="1200"/>
                    <text class="cardinality" x="4010" y="1180">1</text>
                </g>

                <!-- ENTITY: VENDOR_ANALYTICS_EVENTS -->
                <!-- Added new class "entity-analytics" -->
                <g id="analytics-entity" class="entity entity-analytics">
                    <rect x="5980" y="1200" width="240" height="100"/>
                    <text x="6100" y="1235">VENDOR_ANALYTICS</text>
                    <text x="6100" y="1260">EVENTS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="5830" cy="1200" rx="60" ry="35"/>
                        <text x="5830" y="1205">id</text>
                        <line class="line" x1="5890" y1="1200" x2="5980" y2="1225"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="5830" cy="1300" rx="70" ry="35"/>
                        <text x="5830" y="1305">event_type</text>
                        <line class="line" x1="5900" y1="1300" x2="5980" y2="1275"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="6370" cy="1200" rx="70" ry="35"/>
                        <text x="6370" y="1205">meta</text>
                        <line class="line" x1="6300" y1="1200" x2="6220" y2="1225"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="6370" cy="1300" rx="70" ry="35"/>
                        <text x="6370" y="1305">event_time</text>
                        <line class="line" x1="6300" y1="1300" x2="6220" y2="1275"/>
                    </g>
                </g>

                <!-- RELATIONSHIP 11: VENDORS -- VENDOR_ANALYTICS_EVENTS (1:M, Partial from Vendor, Total from Event) -->
                <g id="vendor-generates-analytics-rel" class="relationship">
                    <polygon points="5000,1225 5050,1250 5000,1275 4950,1250"/>
                    <text x="5000" y="1255">GENERATES</text>
                    
                    <!-- Line to VENDORS (Partial) -->
                    <line class="line" x1="4120" y1="1250" x2="4950" y2="1250"/>
                    <text class="cardinality" x="4150" y="1245">1</text>
                    
                    <!-- Line to ANALYTICS (Total) -->
                    <line class="total-participation" x1="5050" y1="1250" x2="5980" y2="1250"/>
                    <text class="cardinality" x="5950" y="1245">M</text>
                </g>

                <!-- ENTITY: MENUS -->
                <!-- Added new class "entity-menus" -->
                <g id="menus-entity" class="entity entity-menus">
                    <rect x="3880" y="1900" width="240" height="100"/>
                    <text x="4000" y="1955">MENUS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="3730" cy="1900" rx="60" ry="35"/>
                        <text x="3730" y="1905">id</text>
                        <line class="line" x1="3790" y1="1900" x2="3880" y2="1925"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="2000" rx="60" ry="35"/>
                        <text x="3730" y="2005">title</text>
                        <line class="line" x1="3790" y1="2000" x2="3880" y2="1975"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="1900" rx="70" ry="35"/>
                        <text x="4270" y="1905">is_active</text>
                        <line class="line" x1="4200" y1="1900" x2="4120" y2="1925"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="2000" rx="70" ry="35"/>
                        <text x="4270" y="2005">created_at</text>
                        <line class="line" x1="4200" y1="2000" x2="4120" y2="1975"/>
                    </g>
                </g>
                
                <!-- RELATIONSHIP 3: VENDORS -- MENUS (1:M, Total from Vendor, Total from Menu) -->
                <g id="vendor-has-menu-rel" class="relationship">
                    <polygon points="4000,1520 4050,1570 4000,1620 3950,1570"/>
                    <text x="4000" y="1575">HAS</text>
                    <!-- Line to VENDORS (Total) -->
                    <line class="total-participation" x1="4000" y1="1300" x2="4000" y2="1520"/>
                    <text class="cardinality" x="4010" y="1500">1</text>
                    <!-- Line to MENUS (Total) -->
                    <line class="total-participation" x1="4000" y1="1620" x2="4000" y2="1900"/>
                    <text class="cardinality" x="4010" y="1880">M</text>
                </g>

                <!-- ENTITY: MENU_ITEMS -->
                <!-- Added new class "entity-menu-items" -->
                <g id="menu-items-entity" class="entity entity-menu-items">
                    <rect x="3880" y="2600" width="240" height="100"/>
                    <text x="4000" y="2655">MENU_ITEMS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="3730" cy="2550" rx="60" ry="35"/>
                        <text x="3730" y="2555">id</text>
                        <line class="line" x1="3790" y1="2550" x2="3880" y2="2600"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="2650" rx="60" ry="35"/>
                        <text x="3730" y="2655">name</text>
                        <line class="line" x1="3790" y1="2650" x2="3880" y2="2630"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="2750" rx="60" ry="35"/>
                        <text x="3730" y="2755">price</text>
                        <line class="line" x1="3790" y1="2750" x2="3880" y2="2680"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="2550" rx="70" ry="35"/>
                        <text x="4270" y="2555">available</text>
                        <line class="line" x1="4200" y1="2550" x2="4120" y2="2600"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="2650" rx="90" ry="35"/>
                        <text x="4270" y="2655">preparation_time_minutes</text>
                        <line class="line" x1="4180" y1="2650" x2="4120" y2="2630"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="2750" rx="70" ry="35"/>
                        <text x="4270" y="2755">image_url</text>
                        <line class="line" x1="4200" y1="2750" x2="4120" y2="2680"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="3730" cy="2850" rx="70" ry="35"/>
                        <text x="3730" y="2855">description</text>
                        <line class="line" x1="3790" y1="2850" x2="3880" y2="2690"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="4270" cy="2850" rx="70" ry="35"/>
                        <text x="4270" y="2855">created_at</text>
                        <line class="line" x1="4200" y1="2850" x2="4120" y2="2690"/>
                    </g>
                </g>

                <!-- RELATIONSHIP 4: MENUS -- MENU_ITEMS (1:M, Total from Menu, Total from Item) -->
                <g id="menu-contains-items-rel" class="relationship">
                    <polygon points="4000,2220 4050,2270 4000,2320 3950,2270"/>
                    <text x="4000" y="2275">CONTAINS</text>
                    <!-- Line to MENUS (Total) -->
                    <line class="total-participation" x1="4000" y1="2000" x2="4000" y2="2220"/>
                    <text class="cardinality" x="4010" y="2200">1</text>
                    <!-- Line to MENU_ITEMS (Total) -->
                    <line class="total-participation" x1="4000" y1="2320" x2="4000" y2="2600"/>
                    <text class="cardinality" x="4010" y="2580">M</text>
                </g>
                
                <!-- RELATIONSHIP 5: VENDORS -- MENU_ITEMS (1:M, Partial from Vendor, Total from Item) -->
                <g id="vendor-offers-items-rel" class="relationship">
                    <polygon points="5000,1920 5050,1970 5000,2020 4950,1970"/>
                    <text x="5000" y="1975">OFFERS</text>
                    <!-- Line to VENDORS (Partial) -->
                    <path class="line" d="M4120,1250 C 4500,1250 4500,1970 4950,1970" />
                    <text class="cardinality" x="4150" y="1270">1</text>
                    <!-- Line to MENU_ITEMS (Total) -->
                    <path class="total-participation" d="M5050,1970 C 4500,1970 4500,2650 4120,2650" />
                    <text class="cardinality" x="4150" y="2630">M</text>
                </g>

                <!-- ENTITY: ORDERS -->
                <!-- Added new class "entity-orders" -->
                <g id="orders-entity" class="entity entity-orders">
                    <rect x="1980" y="1900" width="240" height="100"/>
                    <text x="2100" y="1955">ORDERS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="1830" cy="1850" rx="60" ry="35"/>
                        <text x="1830" y="1855">id</text>
                        <line class="line" x1="1890" y1="1850" x2="1980" y2="1900"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="1950" rx="70" ry="35"/>
                        <text x="1830" y="1955">placed_at</text>
                        <line class="line" x1="1900" y1="1950" x2="1980" y2="1930"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="2050" rx="80" ry="35"/>
                        <text x="1830" y="2055">scheduled_for</text>
                        <line class="line" x1="1910" y1="2050" x2="1980" y2="1980"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="1850" rx="70" ry="35"/>
                        <text x="2370" y="1855">total_amount</text>
                        <line class="line" x1="2300" y1="1850" x2="2220" y2="1900"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="1950" rx="60" ry="35"/>
                        <text x="2370" y="1955">status</text>
                        <line class="line" x1="2310" y1="1950" x2="2220" y2="1930"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="2050" rx="80" ry="35"/>
                        <text x="2370" y="2055">payment_status</text>
                        <line class="line" x1="2290" y1="2050" x2="2220" y2="1980"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="2150" rx="85" ry="35"/>
                        <text x="1830" y="2155">pickup_or_delivery</text>
                        <line class="line" x1="1915" y1="2150" x2="1980" y2="1990"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="2150" rx="70" ry="35"/>
                        <text x="2370" y="2155">notes</text>
                        <line class="line" x1="2300" y1="2150" x2="2220" y2="1990"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="1750" rx="90" ry="35"/>
                        <text x="1830" y="1755">estimated_ready_at</text>
                        <line class="line" x1="1920" y1="1750" x2="1980" y2="1890"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="1750" rx="70" ry="35"/>
                        <text x="2370" y="1755">created_at</text>
                        <line class="line" x1="2300" y1="1750" x2="2220" y2="1890"/>
                    </g>
                </g>

                <!-- RELATIONSHIP 6: USERS (STUDENT) -- ORDERS (1:M, Partial from User, Partial from Order) -->
                <g id="student-places-order-rel" class="relationship">
                    <polygon points="3000,1220 3050,1270 3000,1320 2950,1270"/>
                    <text x="3000" y="1275">PLACES</text>
                    <!-- Line to USERS (Partial) -->
                    <path class="line" d="M3880,550 C 3500, 550 3500, 1270 3050, 1270" />
                    <text class="cardinality" x="3850" y="570">1</text>
                    <!-- Line to ORDERS (Partial) -->
                    <path class="line" d="M2950,1270 C 2500, 1270 2500, 1900 2220, 1900" />
                    <text class="cardinality" x="2250" y="1880">M</text>
                </g>

                <!-- RELATIONSHIP 7: VENDORS -- ORDERS (1:M, Partial from Vendor, Total from Order) -->
                <g id="vendor-receives-order-rel" class="relationship">
                    <polygon points="3000,1520 3050,1570 3000,1620 2950,1570"/>
                    <text x="3000" y="1575">RECEIVES</text>
                    <!-- Line to VENDORS (Partial) -->
                    <path class="line" d="M3880,1250 C 3500, 1250 3500, 1570 3050, 1570" />
                    <text class="cardinality" x="3850" y="1270">1</text>
                    <!-- Line to ORDERS (Total) -->
                    <path class="total-participation" d="M2950,1570 C 2500, 1570 2500, 1900 2220, 1900" />
                    <text class="cardinality" x="2250" y="1880">M</text>
                </g>

                <!-- ENTITY: ORDER_ITEMS -->
                <!-- Added new class "entity-order-items" -->
                <g id="order-items-entity" class="entity entity-order-items">
                    <rect x="1980" y="2600" width="240" height="100"/>
                    <text x="2100" y="2655">ORDER_ITEMS</text>
                    
                    <g class="attribute pk">
                        <ellipse cx="1830" cy="2550" rx="60" ry="35"/>
                        <text x="1830" y="2555">id</text>
                        <line class="line" x1="1890" y1="2550" x2="1980" y2="2600"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="2650" rx="85" ry="35"/>
                        <text x="1830" y="2655">name_snapshot</text>
                        <line class="line" x1="1915" y1="2650" x2="1980" y2="2630"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="1830" cy="2750" rx="85" ry="35"/>
                        <text x="1830" y="2755">price_snapshot</text>
                        <line class="line" x1="1915" y1="2750" x2="1980" y2="2680"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="2550" rx="70" ry="35"/>
                        <text x="2370" y="2555">quantity</text>
                        <line class="line" x1="2300" y1="2550" x2="2220" y2="2600"/>
                    </g>
                    <g class="attribute">
                        <ellipse cx="2370" cy="2650" rx="80" ry="35"/>
                        <text x="2370" y="2655">notes</text>
                        <line class="line" x1="2290" y1="2650" x2="2220" y2="2630"/>
                    </g>
                </g>
                
                <!-- RELATIONSHIP 8: ORDERS -- ORDER_ITEMS (1:M, Total from Order, Total from Item) -->
                <g id="order-contains-items-rel" class="relationship">
                    <polygon points="2100,2220 2150,2270 2100,2320 2050,2270"/>
                    <text x="2100" y="2275">CONTAINS</text>
                    <!-- Line to ORDERS (Total) -->
                    <line class="total-participation" x1="2100" y1="2000" x2="2100" y2="2220"/>
                    <text class="cardinality" x="2110" y="2200">1</text>
                    <!-- Line to ORDER_ITEMS (Total) -->
                    <line class="total-participation" x1="2100" y1="2320" x2="2100" y2="2600"/>
                    <text class="cardinality" x="2110" y="2580">M</text>
                </g>

                <!-- RELATIONSHIP 9: MENU_ITEMS -- ORDER_ITEMS (1:M, Partial from Item, Partial from OrderItem) -->
                <g id="item-referenced-by-orderitem-rel" class="relationship">
                    <polygon points="3000,2920 3050,2970 3000,3020 2950,2970"/>
                    <text x="3000" y="2975">REFERENCED_BY</text>
                    <!-- Line to MENU_ITEMS (Partial) -->
                    <path class="line" d="M3880,2650 C 3500, 2650 3500, 2970 3050, 2970" />
                    <text class="cardinality" x="3850" y="2670">1</text>
                    <!-- Line to ORDER_ITEMS (Partial) -->
                    <path class="line" d="M2950,2970 C 2500, 2970 2500, 2650 2220, 2650" />
                    <text class="cardinality" x="2250" y="2670">M</text>
                </g>

            </svg>
        </div>
        
        <div class="legend">
            <h3>üìã Legend</h3>
            <!-- Updated Legend -->
            <ul>
                <li><span style="color: #6366f1; font-size: 1.5em; line-height: 1;">‚ñ†</span> <strong>Strong Entity</strong> (Multiple Colors)</li>
                <li><span style="color: #f59e0b; font-size: 1.5em; line-height: 1;">‚ñ†</span> <strong>Weak Entity</strong> (fill: #fffbeb)</li>
                <li><span style="color: #f59e0b; font-size: 1.5em; line-height: 1;">‚óÜ</span> <strong>Relationship</strong> (fill: #fef0c7)</li>
                <li><span style="color: #f59e0b; font-size: 1.5em; line-height: 1;">‚óà</span> <strong>Identifying Relationship</strong></li>
                <li><span style="border: 1.5px solid #a1a1aa; padding: 0 5px; border-radius: 50%;">‚óã</span> <strong>Simple Attribute</strong></li>
                <li><span style="border: 3px solid #a1a1aa; padding: 0 5px; border-radius: 50%;">‚óã</span> <strong>Multi-valued Attribute</strong></li>
                <li><span style="border: 1.5px dashed #a1a1aa; padding: 0 5px; border-radius: 50%;">‚óã</span> <strong>Derived Attribute</strong></li>
                <li><u>Underlined Text</u> - Primary Key</li>
                <li><span style="text-decoration: underline dashed;">Partial Key</span> - Partial Key</li>
                <li>‚îÅ‚îÅ‚îÅ <strong>Single Line</strong> - Partial Participation</li>
                <li><span style="border-bottom: 4px solid #52525b; padding-bottom: 1px;">‚ïê‚ïê‚ïê</span> <strong>Double Line</strong> - Total Participation</li>
                <li><span style="color: #ef4444; font-weight: 700;">1, M, N</span> - Cardinality (fill: #ef4444)</li>
            </ul>
        </div>
    </div>
</body>
</html>